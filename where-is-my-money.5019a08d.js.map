{"version":3,"sources":["utils.js","node_modules/prop-types/lib/ReactPropTypesSecret.js","node_modules/prop-types/factoryWithThrowingShims.js","node_modules/prop-types/index.js","index.js"],"names":["formatDate","timestamp","d","Date","DD","getDate","MM","getMonth","getFullYear","getHours","getMinutes","getDateString","ReactIs","throwOnDirectAccess","module","exports","require","Main","balance","styles","main","List","transactions","items","id","sum","date","category","comment","categoryGroup","userDataStore","categories","list","TransactionForm","transaction","moneyWay","Math","abs","form","value","dateValue","content","chosenCategoryID","e","document","querySelector","innerHTML","target","map","i","join","Category","window","outcome","income","isOpened","transactionId","cachedBalance","data","renderApp","cancel","preventDefault","hideForm","loadEmptyForm","now","showForm","forms","focus","loadTransactionInForm","transactionID","parentElement","deleteTransaction","addTransactionInDB","elements","getTime"],"mappings":"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","file":"where-is-my-money.5019a08d.js","sourceRoot":"..","sourcesContent":["export function formatDate(timestamp) {\n  const d = new Date(timestamp);\n\n  const DD = d.getDate() > 9 ? d.getDate() : `0${d.getDate()}`;\n  const MM = d.getMonth() + 1 > 9 ? d.getMonth() + 1 : `0${d.getMonth() + 1}`;\n  const YYYY = d.getFullYear();\n\n  const HH = d.getHours() > 9 ? d.getHours() : `0${d.getHours()}`;\n  const MI = d.getMinutes() > 9 ? d.getMinutes() : `0${d.getMinutes()}`;\n\n  return `${YYYY}-${MM}-${DD}T${HH}:${MI}`;\n}\n\nexport function getDateString(timestamp) {\n  const d = new Date(timestamp);\n\n  const DD = d.getDate() > 9 ? d.getDate() : `0${d.getDate()}`;\n  const MM = d.getMonth() + 1 > 9 ? d.getMonth() + 1 : `0${d.getMonth() + 1}`;\n  const YYYY = d.getFullYear();\n\n  const HH = d.getHours() > 9 ? d.getHours() : `0${d.getHours()}`;\n  const MI = d.getMinutes() > 9 ? d.getMinutes() : `0${d.getMinutes()}`;\n\n  return `${DD}.${MM}.${YYYY} - ${HH}:${MI}`;\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import { formatDate, getDateString } from './utils';\nimport styles from './style.css';\nimport { func } from 'prop-types';\n\nwindow.userDataStore = {\n  categories: {\n    outcome: ['Одежда', 'Транспорт', 'Услуги', 'Здоровье', 'Питание', 'Гигиена', 'Другое'],\n    income: ['Зарплата', 'Фриланс', 'Подарок', 'Другое'],\n  },\n  balance: 0,\n  transactions: {\n    1619114621421: {\n      sum: 500,\n      moneyWay: '',\n      date: 1619114621421,\n      category: 1,\n      comment: 'Какая-то фигня',\n    },\n    1619208263117: {\n      sum: 10000,\n      date: 1619208263117,\n      category: 0,\n      comment: '',\n    },\n    1619208282263: {\n      sum: -1000,\n      date: 1619208282263,\n      category: 0,\n      comment: 'Педали',\n    },\n    1619208293067: {\n      sum: -245,\n      date: 1619208293067,\n      category: 4,\n      comment: '',\n    },\n    1619208307065: {\n      sum: -50,\n      date: 1619208307065,\n      category: 4,\n      comment: '',\n    },\n  },\n  form: {\n    isOpened: false,\n    transactionId: null,\n    cachedBalance: 0,\n    data: null,\n  },\n};\n\nwindow.renderApp = () => {\n  const { balance, transactions, form } = userDataStore;\n\n  document.querySelector('#app').innerHTML = `\n    <div class=${styles['app-container']}>\n      ${Main(balance)}\n      ${form.isOpened ? TransactionForm(form.data) : ''}\n      ${List(transactions)}\n    </div>\n  `;\n};\n\nrenderApp();\n\nfunction Main(balance) {\n  return `\n    <div class=\"${styles.main}\">\n      <span>BALANCE: ${balance}</span>\n\n      <button\n        class=${styles['btn-add']}\n        onclick=\"loadEmptyForm()\"\n      >\n        +\n      </button>\n    </div>\n  `;\n}\n\nfunction List(transactions) {\n  let items = ``;\n\n  for (let id in transactions) {\n    const { sum, date, category, comment } = transactions[id];\n    const categoryGroup = sum < 0 ? 'outcome' : 'income';\n\n    items += `\n      <li id=\"${id}\" class=${styles['list-item']}>\n        <span style=\"width:30%\">${getDateString(date)}</span>\n        <span style=\"width:15%\">${sum}</span>\n        <span>${userDataStore.categories[categoryGroup][category]}</span>\n        <span style=\"width:25%\">${comment}</span>\n\n        <button\n          \n          class=${styles['btn-edit']}\n          onclick=\"loadTransactionInForm(event)\"\n        >\n          🖉\n        </button>\n\n        <button\n          class=${styles['btn-delete']}\n          onclick=\"deleteTransaction(event)\"\n        >\n          X\n        </button>\n      </li>\n    `;\n  }\n\n  return `<ul class=${styles.list}>${items}</ul>`;\n}\n\nfunction TransactionForm(transaction) {\n  const moneyWay = +transaction.sum > 0 ? 'income' : 'outcome';\n  const { comment, category } = transaction;\n  const sum = transaction.sum ? Math.abs(transaction.sum) : '';\n  const date = formatDate(transaction.date);\n\n  return `\n    <form class=${styles.form} onsubmit=\"addTransactionInDB(event)\">\n      ${Sum(sum)}\n      ${DateInput(date)}\n      ${Comment(comment)}\n      ${Category(category)}\n\n      <button type=\"button\" class=\"cancel\" onclick=\"cancel(event)\">\n        cancel\n      </button>\n\n      <input class=\"add\" type=\"submit\" value=\"add\" />\n    </form>\n  `;\n\n  function Sum(value) {\n    return `\n      <input\n        type=\"number\"\n        placeholder=\"sum\"\n        name=\"sum\"\n        min=\"1\"\n        value =\"${value}\"\n        required\n      >\n    `;\n  }\n\n  function Category(chosenCategoryID) {\n    const handler = e => {\n      document.querySelector('#categories').innerHTML = userDataStore.categories[e.target.value]\n        .map((category, i) => `<option value=${i}>${category}</option>`)\n        .join('');\n    };\n\n    return `\n      <div onchange=\"(${handler})(event)\">\n        <label>\n          <input\n            type=\"radio\"\n            name=\"moneyWay\"\n            value=\"income\"\n            ${moneyWay == 'income' ? 'checked' : ''}\n          />\n          income\n        </label>\n\n        <label>\n          <input \n            type=\"radio\"\n            name=\"moneyWay\" \n            value=\"outcome\" \n            ${moneyWay == 'outcome' ? 'checked' : ''}\n          />\n          outcome\n        </label>\n      </div>\n\n      <br>\n\n      <select name=\"category\" id=\"categories\">\n        ${userDataStore.categories[moneyWay]\n          .map(\n            (category, i) => `\n              <option ${chosenCategoryID == i ? 'selected' : ''} value=${i}> \n                ${category}\n              </option>\n            `,\n          )\n          .join('')}\n      </select>\n    `;\n  }\n\n  function DateInput(dateValue) {\n    return `\n      <input\n        name=\"date\"\n        type=\"datetime-local\" \n        placeholder=\"date\"\n        value=${dateValue}\n      />\n    `;\n  }\n\n  function Comment(content) {\n    return `\n      <input \n        type=\"text\"\n        placeholder=\"comment\"\n        name=\"comment\"\n        value=\"${content}\"\n      />\n    `;\n  }\n}\n\n//////////////////////////////////////////////////////\n\nwindow.cancel = function (e) {\n  e.preventDefault();\n  hideForm();\n  renderApp();\n};\n\nwindow.loadEmptyForm = function () {\n  userDataStore.form.transactionId = Date.now();\n\n  userDataStore.form.data = {\n    sum: '',\n    date: Date.now(),\n    category: 1,\n    comment: '',\n  };\n\n  showForm();\n  renderApp();\n  document.forms[0].sum.focus();\n};\n\nwindow.loadTransactionInForm = function (e) {\n  const transactionID = e.target.parentElement.id;\n  userDataStore.form.transactionId = transactionID;\n\n  userDataStore.form.data = { ...userDataStore.transactions[transactionID] };\n\n  userDataStore.form.cachedBalance =\n    userDataStore.balance - +userDataStore.transactions[transactionID].sum;\n\n  showForm();\n  renderApp();\n  document.forms[0].sum.focus();\n};\n\nwindow.deleteTransaction = function (e) {\n  userDataStore.balance -= userDataStore.transactions[e.target.parentElement.id].sum;\n  delete userDataStore.transactions[e.target.parentElement.id];\n  renderApp();\n};\n\nwindow.addTransactionInDB = function (e) {\n  //вот здесь обратная конвертация\n  e.preventDefault();\n\n  const id = userDataStore.form.transactionId;\n  const { sum, date, category, comment, moneyWay } = e.target.elements;\n\n  userDataStore.transactions[id] = {\n    sum: moneyWay.value == 'income' ? +sum.value : -sum.value,\n    date: new Date(date.value).getTime(),\n    category: +category.value,\n    comment: comment.value,\n  };\n\n  userDataStore.balance += userDataStore.transactions[id].sum - userDataStore.form.data.sum;\n\n  hideForm();\n  window.renderApp();\n};\n\nwindow.showForm = function () {\n  userDataStore.form.isOpened = true;\n};\n\nwindow.hideForm = function () {\n  userDataStore.form.isOpened = false;\n};\n\nwindow.formatDate = formatDate;\n"]}