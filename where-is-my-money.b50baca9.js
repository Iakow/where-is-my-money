parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"FO+Z":[function(require,module,exports) {
"use strict";function t(t){const e=new Date(t),g=e.getDate()>9?e.getDate():`0${e.getDate()}`,n=e.getMonth()+1>9?e.getMonth()+1:`0${e.getMonth()+1}`;return`${e.getFullYear()}-${n}-${g}T${e.getHours()>9?e.getHours():`0${e.getHours()}`}:${e.getMinutes()>9?e.getMinutes():`0${e.getMinutes()}`}`}function e(t){const e=new Date(t);return`${e.getDate()>9?e.getDate():`0${e.getDate()}`}.${e.getMonth()+1>9?e.getMonth()+1:`0${e.getMonth()+1}`}.${e.getFullYear()} - ${e.getHours()>9?e.getHours():`0${e.getHours()}`}:${e.getMinutes()>9?e.getMinutes():`0${e.getMinutes()}`}`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatDate=t,exports.getDateString=e;
},{}],"2iMt":[function(require,module,exports) {
module.exports={main:"_main_3789a","app-container":"_app-container_3789a",list:"_list_3789a","list-item":"_list-item_3789a",form:"_form_3789a","btn-edit":"_btn-edit_3789a","btn-add":"_btn-add_3789a"};
},{}],"WDvf":[function(require,module,exports) {
"use strict";function t(){firebase.initializeApp({apiKey:"AIzaSyBwtSg-c3xYVJkNSDA49afwTxu6rA2JBDI",authDomain:"kottans-app.firebaseapp.com",databaseURL:"https://kottans-app-default-rtdb.firebaseio.com",projectId:"kottans-app",storageBucket:"kottans-app.appspot.com",messagingSenderId:"558738104058",appId:"1:558738104058:web:096c34066c87562a5df343",measurementId:"G-MDSKRH794G"}),firebase.auth().onAuthStateChanged(t=>{t&&(window.UID=t.uid,t.getIdToken().then(t=>window.TOKEN=t).then(()=>w()).then(t=>{window.userDataStore.balance=t.balance,window.userDataStore.transactions=t.transactions,window.userDataStore.categories=t.categories}).then(()=>window.renderApp()).catch())})}async function a(t){let a=await fetch(`https://kottans-app-default-rtdb.firebaseio.com/users/${t}.json?auth=${TOKEN}`,{method:"PUT",body:JSON.stringify({transactions:"",balance:"",categories:{outcome:["Одежда","Транспорт","Услуги","Здоровье","Питание","Гигиена","Другое"],income:["Зарплата","Фриланс","Подарок","Другое"]}})});await a.json()}function e(){firebase.auth().signOut()}function n(t){firebase.auth().signInWithEmailAndPassword(t,"135790").then(t=>{t.user}).catch(t=>{t.code,t.message})}function s(t){firebase.auth().createUserWithEmailAndPassword(t,"135790").then(t=>{var a=t.user;return window.UID=a.uid,a}).then(t=>t.getIdToken()).then(t=>{window.TOKEN=t}).then(()=>{a(UID)}).catch(t=>{t.code,t.message})}async function o(){let t=await fetch(`https://kottans-app-default-rtdb.firebaseio.com/users/${window.UID}/transactions.json?auth=${window.TOKEN}`),a=await t.json();window.userDataStore.transactions=a}async function i(t){let a=await fetch(`https://kottans-app-default-rtdb.firebaseio.com/users/${window.UID}/transactions.json?auth=${window.TOKEN}`,{method:"POST",body:JSON.stringify(t)});await a.json();o()}async function r(t){let a=await fetch(`https://kottans-app-default-rtdb.firebaseio.com/users/${window.UID}/balance.json?auth=${window.TOKEN}`,{method:"PUT",body:JSON.stringify(t)});await a.json()}async function c(){let t=await fetch(`https://kottans-app-default-rtdb.firebaseio.com/users/${window.UID}/balance.json?auth=${window.TOKEN}`),a=await t.json();window.userDataStore.balance=a}async function d(){let t=await fetch(`https://kottans-app-default-rtdb.firebaseio.com/users/${window.UID}/categories.json?auth=${window.TOKEN}`),a=await t.json();window.userDataStore.categories=a}async function w(){let t=await fetch(`https://kottans-app-default-rtdb.firebaseio.com/users/${window.UID}.json?auth=${window.TOKEN}`);return await t.json()}async function u(t){let a=await fetch(`https://kottans-app-default-rtdb.firebaseio.com/users/${UID}/transactions/${t}.json?auth=${window.TOKEN}`,{method:"DELETE"});await a.json()}async function p(t,a){let e=await fetch(`https://kottans-app-default-rtdb.firebaseio.com/users/${window.UID}/transactions/${t}.json?auth=${window.TOKEN}`,{method:"PUT",body:JSON.stringify(a)});await e.json()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectFirebase=t,exports.register=s,exports.getTransactions=o,exports.addNewTransaction=i,exports.setBalance=r,exports.getBalance=c,exports.getCategories=d,exports.getUserDB=w,exports.removeTransaction=u,exports.editTransaction=p;
},{}],"Focm":[function(require,module,exports) {
"use strict";var n=require("./utils"),e=a(require("./style.css")),t=require("./rest.js");function a(n){return n&&n.__esModule?n:{default:n}}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,a)}return t}function r(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach(function(e){c(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function c(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s(n){return`\n    <div class="${e.default.main}">\n      <span>BALANCE: ${n}</span>\n\n      <button\n        class=${e.default["btn-add"]}\n        onclick="loadEmptyForm()"\n      >\n        +\n      </button>\n    </div>\n  `}function i(t){let a="";for(let o in t){const{sum:r,date:c,category:s,comment:i}=t[o],u=r<0?"outcome":"income";a+=`\n      <li id="${o}" class=${e.default["list-item"]}>\n        <span style="width:30%">${(0,n.getDateString)(c)}</span>\n        <span style="width:15%">${r}</span>\n        <span>${userDataStore.categories[u][s]}</span>\n        <span style="width:25%">${i}</span>\n\n        <button\n          \n          class=${e.default["btn-edit"]}\n          onclick="loadTransactionInForm(event)"\n        >\n          🖉\n        </button>\n\n        <button\n          class=${e.default["btn-delete"]}\n          onclick="deleteTransaction(event)"\n        >\n          X\n        </button>\n      </li>\n    `}return`<ul class=${e.default.list}>${a}</ul>`}function u(t){const a=+t.sum>0?"income":"outcome",{comment:o,category:r}=t,c=t.sum?Math.abs(t.sum):"",s=(0,n.formatDate)(t.date);return`\n    <form class=${e.default.form} onsubmit="addTransactionInDB(event)">\n      ${d=c,`\n      <input\n        type="number"\n        placeholder="sum"\n        name="sum"\n        min="1"\n        value ="${d}"\n        required\n      >\n    `}\n      ${l=s,`\n      <input\n        name="date"\n        type="datetime-local" \n        placeholder="date"\n        value=${l}\n      />\n    `}\n      ${u=o,`\n      <input \n        type="text"\n        placeholder="comment"\n        name="comment"\n        value="${u}"\n      />\n    `}\n      ${i=r,`\n      <div onchange="(${n=>{document.querySelector("#categories").innerHTML=userDataStore.categories[n.target.value].map((n,e)=>`<option value=${e}>${n}</option>`).join("")}})(event)">\n        <label>\n          <input\n            type="radio"\n            name="moneyWay"\n            value="income"\n            ${"income"==a?"checked":""}\n          />\n          income\n        </label>\n\n        <label>\n          <input \n            type="radio"\n            name="moneyWay" \n            value="outcome" \n            ${"outcome"==a?"checked":""}\n          />\n          outcome\n        </label>\n      </div>\n\n      <br>\n\n      <select name="category" id="categories">\n        ${userDataStore.categories[a].map((n,e)=>`\n              <option ${i==e?"selected":""} value=${e}> \n                ${n}\n              </option>\n            `).join("")}\n      </select>\n    `}\n\n      <button type="button" class="cancel" onclick="cancel(event)">\n        cancel\n      </button>\n\n      <input class="add" type="submit" value="add" />\n    </form>\n  `;var i,u,l,d}function l(n){window.userDataStore.balance=n.balance,window.userDataStore.transactions=n.transactions,window.userDataStore.categories=n.categories}window.userDataStore={categories:null,balance:null,transactions:null,form:{isOpened:!1,transactionId:null,data:null}},(0,t.connectFirebase)(),document.querySelector("#app").innerHTML="Loading...",window.renderApp=(()=>{const{balance:n,transactions:t,form:a}=userDataStore;document.querySelector("#app").innerHTML=`\n    <div class=${e.default["app-container"]}>\n      ${s(n)}\n      ${a.isOpened?u(a.data):""}\n      ${i(t)}\n    </div>\n  `}),window.cancel=function(n){n.preventDefault(),hideForm(),renderApp()},window.loadEmptyForm=function(){userDataStore.form.data={sum:"",date:Date.now(),category:1,comment:""},showForm(),renderApp(),document.forms[0].sum.focus()},window.loadTransactionInForm=function(n){const e=n.target.parentElement.id;userDataStore.form.transactionId=e,userDataStore.form.data=r({},userDataStore.transactions[e]),showForm(),renderApp(),document.forms[0].sum.focus()},window.deleteTransaction=function(n){const e=n.target.parentElement.id,a=userDataStore.balance-userDataStore.transactions[e].sum;(0,t.removeTransaction)(e).then(()=>(0,t.setBalance)(a)).then(()=>(0,t.getUserDB)()).then(n=>l(n)).then(()=>renderApp())},window.addTransactionInDB=function(n){n.preventDefault();const{sum:e,date:a,category:o,comment:r,moneyWay:c}=n.target.elements,s={sum:"income"==c.value?+e.value:-e.value,date:new Date(a.value).getTime(),category:+o.value,comment:r.value},i=+userDataStore.form.data.sum,u=userDataStore.balance+s.sum-i;userDataStore.form.transactionId?(0,t.editTransaction)(userDataStore.form.transactionId,s).then(()=>{hideForm(),window.renderApp()}).then(()=>(0,t.setBalance)(u)).then(()=>(0,t.getUserDB)()).then(n=>l(n)).then(()=>window.renderApp()):(0,t.addNewTransaction)(s).then(()=>{hideForm(),window.renderApp()}).then(()=>(0,t.setBalance)(u)).then(()=>(0,t.getUserDB)()).then(n=>l(n)).then(()=>window.renderApp())},window.showForm=function(){userDataStore.form.isOpened=!0},window.hideForm=function(){userDataStore.form.isOpened=!1},window.formatDate=n.formatDate;
},{"./utils":"FO+Z","./style.css":"2iMt","./rest.js":"WDvf"}]},{},["Focm"], null)
//# sourceMappingURL=where-is-my-money.b50baca9.js.map